package views;

import javax.annotation.PostConstruct;
import javax.el.ELContext;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;

import dataAccessLayer.GameDataAccess;
import model.Player;

@ManagedBean(name = "personalInfo")
@SessionScoped
public class PersonalInformationView {
	public  int playedGames;
    private int winner;
    private int looser;
    

    @PostConstruct
	public void init() {
    	ELContext context = FacesContext.getCurrentInstance().getELContext();
		LoginView firstBean = (LoginView) context.getELResolver().getValue(context, null, "loginView");
		this.setPlayedGames(firstBean.currentPlayer.GetTotalPlayedGames());
	}
    
    public PersonalInformationView(Player player)
    {
    	if(player!=null)
    	{
    		if(player.getGames()!=null)
    		{
    			this.playedGames=player.getGames().size();
    			  FacesContext.getCurrentInstance().addMessage(null,
  						new FacesMessage(FacesMessage.SEVERITY_WARN, null, "Total played games: "+this.playedGames));  
    		}
//    		if(player.getTeams()!=null)
//    		{
//    			this.winner=player.GetGames(true);
//    			this.looser=player.GetGames(false);
//    		}
    	}
    }
    
    public int getPlayedGames() {
		return playedGames;
	}

	public void setPlayedGames(int playedGames) {
		this.playedGames = playedGames;
	}

	public int getWinner() {
		return winner;
	}
	
	public void setWinner(int winner) {
		this.winner = winner;
	}

	public int getLooser() {
		return looser;
	}

	public void setLooser(int looser) {
		this.looser = looser;
	}
}
