package dataAccessLayer;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.TypedQuery;

import model.Player;

@ManagedBean(name = "playerDataAccess")
@ApplicationScoped
public class PlayerRatingAccess implements Serializable{

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	
	public static EntityManagerFactory emf= Persistence.createEntityManagerFactory("TFL");
	public static EntityManager em= emf.createEntityManager();

	public PlayerRatingAccess() {
		if(!em.getTransaction().isActive())
		  {
			  em.getTransaction().begin();
		  }
	}
	
	  public  List<PlayerRating> listPlayerRatings() {
		    TypedQuery<Player> query = em.createQuery("SELECT p FROM Player p",Player.class);
			List<Player> result = new ArrayList<Player>();
			result = query.getResultList();
		   
//			for (Player g : result) {
//				System.out.println("ID"+g.getId()+" Password:" +g.getPassword()+" Username"+g.getUsername());
//				System.out.println("Game players:");
//			}
			return result;
	}

}
